# Spring Cloud Microservices CRUD Lab

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.

## üèóÔ∏è –°—Ö–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞

```mermaid
graph TB
    subgraph "CRUD_lab"
        POM[pom.xml]
        DOCKER[docker-compose.yaml]
        BUILD[build-and-run.bat]
        TEST[test-services.bat]
        
        subgraph "–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã"
            USER[user-service]
            NOTIFY[notification-service]
            GATEWAY[gateway-service]
        end
        
        subgraph "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞"
            EUREKA[eureka-server]
            CONFIG[config-server]
            INIT[init-scripts]
        end
    end
    
    POM --> USER
    POM --> NOTIFY
    POM --> GATEWAY
    POM --> EUREKA
    POM --> CONFIG
    
    DOCKER --> USER
    DOCKER --> NOTIFY
    DOCKER --> GATEWAY
    DOCKER --> EUREKA
    DOCKER --> CONFIG
    
    BUILD --> POM
    TEST --> DOCKER
    
    CONFIG --> USER
    CONFIG --> NOTIFY
    CONFIG --> GATEWAY
    
    EUREKA --> USER
    EUREKA --> NOTIFY
    EUREKA --> GATEWAY
    
    INIT --> USER
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
CRUD_lab/
‚îú‚îÄ‚îÄ üìÑ README.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ üê≥ docker-compose.yaml          # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üîß build-and-run.bat            # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ üß™ test-services.bat            # –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ üì¶ pom.xml                      # Maven –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ üë§ user-service/                # –°–µ—Ä–≤–∏—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ üìß notification-service/        # –°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ üåê gateway-service/             # API Gateway
‚îú‚îÄ‚îÄ üîç eureka-server/               # Service Discovery
‚îú‚îÄ‚îÄ ‚öôÔ∏è config-server/               # Configuration Server
‚îî‚îÄ‚îÄ üóÑÔ∏è init-scripts/               # SQL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

**–°–µ—Ä–≤–∏—Å—ã:**
- **Gateway** (8080) - API Gateway
- **User Service** (8081) - CRUD –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Notification Service** (8082) - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Eureka Server** (8761) - Service Discovery
- **Config Server** (8888) - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **PostgreSQL** (5432) - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Kafka** (9092) - Message Broker

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
build-and-run.bat

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
test-services.bat
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```bash
# –°–±–æ—Ä–∫–∞
mvn clean package -DskipTests

# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## üîó –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Swagger UI**: http://localhost:8080/swagger-ui.html
- **Eureka Dashboard**: http://localhost:8761
- **API Gateway**: http://localhost:8080
- **User Service**: http://localhost:8081
- **Notification Service**: http://localhost:8082

## üìã API Endpoints

### User Service
- `GET /api/users` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `POST /api/users` - —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/users/{id}` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- `PUT /api/users/{id}` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/users/{id}` - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Notification Service
- `GET /api/notifications` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `POST /api/notifications` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí User Service
2. User Service –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ ‚Üí Kafka
3. Notification Service –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ ‚Üí Kafka
4. Notification Service –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email ‚Üí Gmail SMTP

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Spring Boot 3.1.2**
- **Spring Cloud 2022.0.4**
- **PostgreSQL** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Apache Kafka** - Event Streaming
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã 8080-8082, 8761, 8888, 5432, 9092 —Å–≤–æ–±–æ–¥–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs [service-name]`

### –û—á–∏—Å—Ç–∫–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down

# –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤
docker-compose down --rmi all

# –£–¥–∞–ª–µ–Ω–∏–µ volumes
docker-compose down -v
```

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–î–ª—è –∑–∞–ø—É—Å–∫–∞: `build-and-run.bat`